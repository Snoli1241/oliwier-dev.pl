<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#02010a" />
  <title>Oliwier. — Web Designer & Developer</title>
  <meta name="description" content="Single-page business card site for Oliwier — Web Designer & Developer." />
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800;900&display=swap" rel="stylesheet">
  
  <!-- Tailwind (better: install locally for production) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily:{ sans:['Inter','ui-sans-serif','system-ui'] },
          colors:{ brand:{500:'#6678ff'} },
          boxShadow:{ glow:'0 10px 40px rgba(102,120,255,.35)' }
        }
      }
    };
  </script>

  <!-- ✅ Favicon (PNG) -->
  <link rel="icon" type="image/png" href="/favicon.png" />

  <style>
    html,body{margin:0;height:100%;overflow:hidden;user-select:none;-webkit-user-select:none}
    html{scroll-behavior:smooth}
    .noise{position:fixed;inset:0;pointer-events:none;opacity:.05;mix-blend-mode:soft-light;background-image:url('data:image/svg+xml;utf8,\
      <svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 200 200">\
      <filter id="n"><feTurbulence baseFrequency="0.7" numOctaves="2"/></filter>\
      <rect width="100%" height="100%" filter="url(%23n)" opacity=".8"/></svg>')}
    canvas{display:block;width:100%;height:100%}
    .focus-ring:focus{outline:2px solid rgba(102,120,255,.8); outline-offset:2px}
    body.dragging{cursor:grabbing}
    body.dragging, body.dragging *{user-select:none;-webkit-user-select:none}
    main{touch-action:none}
  </style>
</head>
<body class="bg-neutral-950 text-neutral-100 antialiased font-sans">
  <div class="noise" aria-hidden="true"></div>

  <!-- 3D background fills entire viewport -->
  <canvas id="bg3d" class="fixed inset-0 -z-10"></canvas>

  <!-- Overlay content -->
  <main class="relative flex flex-col items-center justify-center min-h-screen text-center px-4">
    <h1 class="text-6xl md:text-8xl font-black leading-[0.95] tracking-tight">Oliwier<span class="text-brand-500">.</span></h1>
    <p id="role" class="mt-3 text-neutral-300 text-lg" data-i18n="role">Web Designer & Developer</p>

    <!-- Simple contact card -->
    <div id="contact" class="mt-10 mx-auto max-w-sm rounded-3xl border border-white/10 bg-black/40 backdrop-blur p-6">
      <h2 id="contact_title" class="text-lg font-bold mb-3" data-i18n="contact_title">Contact</h2>
      <p class="text-neutral-300"><span id="email_label" data-i18n="email_label">Email</span>: <a id="email_value" href="mailto:hello@oliwier-dev.pl" class="underline hover:text-white">hello@oliwier-dev.pl</a></p>
      <p class="mt-2 text-neutral-300"><span id="phone_label" data-i18n="phone_label">Phone</span>: <a id="phone_value" href="tel:+48881005783" class="underline hover:text-white">+48&nbsp;881&nbsp;005&nbsp;783</a></p>
    </div>

    <footer class="mt-10 text-center text-xs text-neutral-400">© <span id="year"></span> oliwier-dev.pl</footer>
  </main>

  <!-- Language switcher -->
  <button id="langBtn" class="fixed bottom-4 left-4 h-12 w-12 rounded-full border border-white/10 bg-black/40 backdrop-blur text-sm font-semibold focus-ring"
          aria-label="Switch language" title="Switch language">EN</button>

  <!-- three.js background object -->
  <script src="https://unpkg.com/three@0.160.0/build/three.min.js"></script>
  <script>
    // Year
    document.getElementById('year').textContent = new Date().getFullYear();

    // THREE.js setup
    const canvas = document.getElementById('bg3d');
    const renderer = new THREE.WebGLRenderer({ canvas, antialias:true, alpha:true });
    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0x02010a); // deep space feel
    const camera = new THREE.PerspectiveCamera(45, window.innerWidth/window.innerHeight, 0.1, 100);
    camera.position.set(0, 0, 5.5);

    function resize(){
      const isMobile = window.innerWidth < 768;
      const dpr = Math.min(window.devicePixelRatio||1, isMobile ? 1.5 : 2);
      renderer.setPixelRatio(dpr);
      renderer.setSize(window.innerWidth, window.innerHeight);
      camera.aspect = window.innerWidth/window.innerHeight;
      camera.updateProjectionMatrix();
    }
    window.addEventListener('resize', resize);
    resize();

    // Lights
    const key = new THREE.DirectionalLight(0xffffff,1.0); key.position.set(3,2,4);
    const fill = new THREE.DirectionalLight(0x88ccff,0.5); fill.position.set(-2,-1,-3);
    scene.add(key, fill, new THREE.AmbientLight(0xffffff,0.3));

    // Shape
    const geo = new THREE.TorusKnotGeometry(0.9, 0.28, 220, 40);
    const mat = new THREE.MeshStandardMaterial({ metalness:.9, roughness:.25, color:0x9bb5ff, emissive:0x111122, emissiveIntensity:0.3 });
    const mesh = new THREE.Mesh(geo, mat); scene.add(mesh);

    // Starfield (reduced on mobile)
    const isMobile = window.innerWidth < 768;
    const starCount = isMobile ? 900 : 2000;
    const pGeo = new THREE.BufferGeometry(); const pos = new Float32Array(starCount*3);
    for(let i=0;i<starCount;i++){ pos[i*3]=(Math.random()-0.5)*60; pos[i*3+1]=(Math.random()-0.5)*60; pos[i*3+2]=(Math.random()-0.5)*60; }
    pGeo.setAttribute('position', new THREE.BufferAttribute(pos,3));
    const pMat = new THREE.PointsMaterial({ size:.03, transparent:true, opacity:.6, color:0xffffff });
    const stars = new THREE.Points(pGeo, pMat); scene.add(stars);

    // Drag anywhere to rotate, with inertia; auto-rotate resumes smoothly when idle
    let dragging=false, prev={x:0,y:0}, lastDrag=0;
    let inertiaX=0, inertiaY=0; // momentum after release
    let autoPhase=0, prevTime=performance.now();

    function onPointerDown(e){ dragging=true; prev.x=e.clientX; prev.y=e.clientY; document.body.classList.add('dragging'); e.preventDefault(); }
    function onPointerUp(){ dragging=false; document.body.classList.remove('dragging'); }
    function onPointerMove(e){
      if(!dragging) return; const dx=(e.clientX-prev.x)/200; const dy=(e.clientY-prev.y)/200; prev.x=e.clientX; prev.y=e.clientY;
      mesh.rotation.y += dx; mesh.rotation.x += dy;
      inertiaY = dx; inertiaX = dy; // store last velocity
      lastDrag = performance.now();
      e.preventDefault();
    }

    window.addEventListener('pointerdown', onPointerDown, {passive:false});
    window.addEventListener('pointerup', onPointerUp, {passive:true});
    window.addEventListener('pointermove', onPointerMove, {passive:false});

    const reduce = matchMedia('(prefers-reduced-motion: reduce)').matches;
    (function loop(){
      requestAnimationFrame(loop);
      const now = performance.now();
      const dt = Math.min((now - prevTime) / 16.67, 3); // normalize to ~60fps
      prevTime = now;

      if(!reduce){
        if(!dragging){
          // inertia decay
          mesh.rotation.y += inertiaY * dt;
          mesh.rotation.x += inertiaX * dt;
          inertiaX *= 0.92; inertiaY *= 0.92;

          // gentle auto-rotate after short idle
          const idle = now - lastDrag > 300;
          if(idle){
            autoPhase += 0.01 * dt;
            mesh.rotation.y += 0.003 * dt;
            mesh.rotation.x += Math.sin(autoPhase) * 0.0015 * dt; // additive wobble (no snapping)
          }
        }
      }
      stars.rotation.y -= 0.0003 * dt;
      renderer.render(scene,camera);
    })();
  </script>
  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    // THREE.js setup
    const canvas = document.getElementById('bg3d');
    const renderer = new THREE.WebGLRenderer({ canvas, antialias:true, alpha:true });
    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0x02010a);
    const camera = new THREE.PerspectiveCamera(45, window.innerWidth/window.innerHeight, 0.1, 100);
    camera.position.set(0, 0, 5.5);

    function resize(){
      const isMobile = window.innerWidth < 768;
      const dpr = Math.min(window.devicePixelRatio||1, isMobile ? 1.5 : 2);
      renderer.setPixelRatio(dpr);
      renderer.setSize(window.innerWidth, window.innerHeight);
      camera.aspect = window.innerWidth/window.innerHeight;
      camera.updateProjectionMatrix();
    }
    window.addEventListener('resize', resize);
    resize();

    // Lights
    const key = new THREE.DirectionalLight(0xffffff,1.0); key.position.set(3,2,4);
    const fill = new THREE.DirectionalLight(0x88ccff,0.5); fill.position.set(-2,-1,-3);
    scene.add(key, fill, new THREE.AmbientLight(0xffffff,0.3));

    // Shape
    const geo = new THREE.TorusKnotGeometry(0.9, 0.28, 220, 40);
    const mat = new THREE.MeshStandardMaterial({ metalness:.9, roughness:.25, color:0x9bb5ff, emissive:0x111122, emissiveIntensity:0.3 });
    const mesh = new THREE.Mesh(geo, mat); scene.add(mesh);

    // Starfield
    const isMobile = window.innerWidth < 768;
    const starCount = isMobile ? 900 : 2000;
    const pGeo = new THREE.BufferGeometry(); const pos = new Float32Array(starCount*3);
    for(let i=0;i<starCount;i++){ pos[i*3]=(Math.random()-0.5)*60; pos[i*3+1]=(Math.random()-0.5)*60; pos[i*3+2]=(Math.random()-0.5)*60; }
    pGeo.setAttribute('position', new THREE.BufferAttribute(pos,3));
    const pMat = new THREE.PointsMaterial({ size:.03, transparent:true, opacity:.6, color:0xffffff });
    const stars = new THREE.Points(pGeo, pMat); scene.add(stars);

    // Drag to orbit
    let dragging=false, prev={x:0,y:0}, lastDrag=0;
    canvas.addEventListener('pointerdown',e=>{dragging=true;prev.x=e.clientX;prev.y=e.clientY;lastDrag=performance.now();});
    window.addEventListener('pointerup',()=>dragging=false);
    window.addEventListener('pointermove',e=>{
      if(!dragging) return; const dx=(e.clientX-prev.x)/200; const dy=(e.clientY-prev.y)/200; prev.x=e.clientX; prev.y=e.clientY; mesh.rotation.y+=dx; mesh.rotation.x+=dy; lastDrag=performance.now();
    });

    // Animate
    let t=0; const reduce = matchMedia('(prefers-reduced-motion: reduce)').matches;
    (function loop(){
      requestAnimationFrame(loop);
      if(!reduce){
        const idle = performance.now() - lastDrag > 500; // smoother delay after drag
        if(idle){ mesh.rotation.y += 0.004; mesh.rotation.x = Math.sin(t)*0.12; }
        t += 0.01; stars.rotation.y -= 0.0003;
      }
      renderer.render(scene,camera);
    })();
  </script>
  <script>
    // i18n strings
    const I18N = {
      en: { role: 'Web Designer & Developer', contact_title: 'Contact', email_label: 'Email', phone_label: 'Phone' },
      pl: { role: 'Projektant i deweloper stron WWW', contact_title: 'Kontakt', email_label: 'E‑mail', phone_label: 'Telefon' }
    };
    function setLang(lang){
      const dict = I18N[lang] || I18N.en;
      document.documentElement.lang = lang;
      for(const [key,val] of Object.entries(dict)){
        const el = document.querySelector('[data-i18n="'+key+'"]');
        if(el) el.textContent = val;
      }
      localStorage.setItem('lang', lang);
      document.getElementById('langBtn').textContent = lang.toUpperCase();
    }
    const saved = localStorage.getItem('lang') || (navigator.language && navigator.language.startsWith('pl') ? 'pl' : 'en');
    setLang(saved);
    document.getElementById('langBtn').addEventListener('click', ()=> setLang((localStorage.getItem('lang')||'en') === 'en' ? 'pl' : 'en'));
  </script>
</body>
</html>
